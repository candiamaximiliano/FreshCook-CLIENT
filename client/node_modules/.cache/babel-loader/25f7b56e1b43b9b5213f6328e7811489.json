{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maxim\\\\Desktop\\\\FreshCook-app\\\\client\\\\src\\\\pages\\\\CreateRecipe\\\\RecipeCreate.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { postRecipe, getDiets } from \"../../redux/actions/recipes\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport newRecipeStyles from \"./RecipeCreate.module.css\";\nimport { validateName } from \"../../helpers/regex\";\nimport api from \"../../services/api\";\nimport veganBW from \"../../images/VeganBW.png\";\nimport veganColor from \"../../images/VeganColor.png\";\nimport vegetarianBW from \"../../images/VegetarianBW.png\";\nimport vegetarianColor from \"../../images/VegetarianColor.png\";\nimport glutenFreeBW from \"../../images/GlutenFreeBW.png\";\nimport glutenFreeColor from \"../../images/GlutenFreeColor.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function validate(input) {\n  let errors = {};\n  input.name ? errors.name = \"\" : errors.name = \"You must name the recipe\";\n  input.summary ? errors.summary = \"\" : errors.summary = \"You must provide a summary\";\n  input.diets.length < 1 ? errors.diets = \"Choose at least one diet\" : errors.diets = \"\";\n\n  if (!input.image.includes(\"https://\") && !input.image.includes(\"http://\")) {\n    errors.image = \"This isn't a valid image address\";\n  } else {\n    errors.image = \"\";\n  } // if (input.score < 1 || input.score > 100) {\n  //   errors.score = \"Number required. Must be a number between 1-100\";\n  // }\n  // if (input.healthScore < 1 || input.healthScore > 100) {\n  //   errors.healthScore = \"Number required. Must be a number between 1-100\";\n  // }\n\n\n  return errors;\n}\nexport default function RecipeCreate() {\n  _s();\n\n  var _input$stepByStep;\n\n  const dispatch = useDispatch();\n  const {\n    user: currentUser\n  } = useSelector(state => state.auth);\n  const diets = useSelector(state => state.recipes.diets);\n  const [errors, setErrors] = useState({});\n  const [success, setSuccess] = useState(false);\n  const [input, setInput] = useState({\n    name: \"\",\n    image: \"\",\n    summary: \"\",\n    score: \"\",\n    healthScore: \"\",\n    step: \"\",\n    stepByStep: [],\n    vegan: \"false\",\n    vegetarian: \"false\",\n    glutenFree: \"false\",\n    diets: []\n  });\n\n  const handleChange = e => {\n    e.preventDefault();\n    setInput({ ...input,\n      [e.target.name]: e.target.value\n    });\n    setErrors(validate({ ...input,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleCheck = e => {\n    if (e.target.checked) {\n      setInput({ ...input,\n        diets: [...input.diets, e.target.value]\n      });\n    } else {\n      const diets = input.diets.filter(diet => {\n        return diet !== e.target.value;\n      });\n      setInput({ ...input,\n        diets: diets\n      });\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (input.name && input.image && input.summary && input.score && input.healthScore && input.stepByStep && input.diets) {\n      dispatch(postRecipe(input));\n      setSuccess(true);\n      alert(\"Recipe created correctly\");\n      setErrors(\"\");\n      setInput({\n        name: \"\",\n        image: \"\",\n        summary: \"\",\n        score: \"\",\n        healthScore: \"\",\n        step: \"\",\n        stepByStep: [],\n        vegan: \"false\",\n        vegetarian: \"false\",\n        glutenFree: \"false\",\n        diets: []\n      });\n    } else {\n      // alert(\"DATA REQUIRED\");\n      setSuccess(false);\n    }\n  };\n\n  useEffect(() => {\n    dispatch(getDiets());\n  }, [dispatch]); // Cargar imagen de tipo File\n\n  const [file, setFile] = useState();\n  const [format, setFormat] = useState(\"\");\n\n  const saveFile = e => {\n    var _e$target$files$;\n\n    setFile(e.target.files[0]);\n    var formatImage = (_e$target$files$ = e.target.files[0]) === null || _e$target$files$ === void 0 ? void 0 : _e$target$files$.name.split(\".\");\n    setFormat(formatImage[(formatImage === null || formatImage === void 0 ? void 0 : formatImage.length) - 1]);\n  };\n\n  const uploadUserFile = async e => {\n    const code = uuidv4();\n    saveFile(e); // console.log(code)\n\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"format\", format);\n\n    try {\n      await api.post(`upload/static/${code}.${format}`, formData);\n      setInput({ ...input,\n        image: code + \".\" + format\n      });\n      alert(\"Imagen cargada con Exito\", \"\", \"success\");\n    } catch (ex) {\n      console.error(ex);\n    }\n  }; // const [addSteps, setAddSteps] = useState([1]);\n  // let i = 0;\n  // const addStep = () => {\n  //   i = i + 1;\n  //   setAddSteps([...addSteps, i]);\n  //   console.log(addSteps);\n  // };\n\n\n  const inputStep = useRef();\n  const [deleted, setDeleted] = useState({\n    wasDelete: false\n  });\n\n  const addStep = () => {\n    setInput({ ...input,\n      stepByStep: [...input.stepByStep, inputStep.current.defaultValue]\n    });\n    deleted.wasDelete ? setDeleted({\n      wasDelete: false\n    }) : console.log(false);\n  };\n\n  const deleteStep = value => event => {\n    let stepLength = input.stepByStep.length;\n    let index = input.stepByStep.indexOf(value);\n    input.stepByStep.splice(index, 1);\n\n    if (stepLength > input.stepByStep.length) {\n      setDeleted({\n        wasDelete: true\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: newRecipeStyles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: newRecipeStyles.header,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: newRecipeStyles.title,\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: currentUser.username.charAt(0).toUpperCase() + currentUser.username.slice(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), \" \", \"make your own recipe!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        handleSubmit(e);\n      },\n      className: newRecipeStyles.form,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: newRecipeStyles.input,\n          type: \"text\",\n          value: input.name,\n          name: \"name\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Name\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/x-png,image/jpeg\",\n          className: newRecipeStyles.input,\n          name: \"image\",\n          placeholder: \"Image\",\n          onChange: e => {\n            uploadUserFile(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), \" \", errors.image && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: newRecipeStyles.input,\n          type: \"text-area\",\n          value: input.summary,\n          name: \"summary\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Write a summary\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), errors.summary && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Score:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: newRecipeStyles.input,\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          step: \"1\",\n          value: input.score,\n          name: \"score\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Score\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: input.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), errors.score && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.score\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Health Score:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: newRecipeStyles.input,\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          step: \"1\",\n          value: input.healthScore,\n          name: \"healthScore\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Health score\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: input.healthScore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), errors.healthScore && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.healthScore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Directions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: inputStep,\n          className: newRecipeStyles.input,\n          type: \"text\",\n          value: input.step,\n          name: \"step\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Write instruction\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addStep,\n          children: \"Add direction\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          children: (_input$stepByStep = input.stepByStep) === null || _input$stepByStep === void 0 ? void 0 : _input$stepByStep.map((s, i) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: s\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: deleteStep(s),\n                children: \"x\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this)]\n            }, uuidv4(), true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), errors.stepByStep && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.stepByStep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Vegan:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: input.vegan ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: veganBW,\n            alt: \"vegan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            src: veganColor,\n            alt: \"vegan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vegan\",\n          rows: \"5\",\n          onChange: e => {\n            handleChange(e);\n          },\n          className: newRecipeStyles.select,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: false,\n            className: newRecipeStyles.optionSelect,\n            children: \"False\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: true,\n            className: newRecipeStyles.optionSelect,\n            children: \"True\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Vegetarian:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"vegetarian\",\n          onChange: e => {\n            handleChange(e);\n          },\n          className: newRecipeStyles.select,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: false,\n            className: newRecipeStyles.optionSelect,\n            children: \"False\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: true,\n            className: newRecipeStyles.optionSelect,\n            children: \"True\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Gluten Free:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"glutenFree\",\n          onChange: e => {\n            handleChange(e);\n          },\n          className: newRecipeStyles.select,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: false,\n            className: newRecipeStyles.optionSelect,\n            children: \"False\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: true,\n            className: newRecipeStyles.optionSelect,\n            children: \"True\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Diets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.checkboxContainer,\n        children: diets === null || diets === void 0 ? void 0 : diets.map(diet => /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: newRecipeStyles.checkbox,\n            type: \"checkbox\",\n            name: diet.name,\n            value: diet.name,\n            onChange: e => {\n              handleCheck(e);\n            }\n          }, diet.id + \"diet\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this), diet.name.charAt(0).toUpperCase() + diet.name.slice(1)]\n        }, diet.id + \"label\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: newRecipeStyles.button,\n        type: \"submit\",\n        children: \"Create Recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/home\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: newRecipeStyles.button,\n          children: \"Back To Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), success ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: newRecipeStyles.message,\n      children: \"Created Successfully\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }, this) : null, Object.keys(errors).length > 0 ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: newRecipeStyles.message,\n      children: \"Something went wrong!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RecipeCreate, \"Vka16h91e8KHyhVJnxY6s9uHfS8=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = RecipeCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecipeCreate\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatch","useSelector","Link","postRecipe","getDiets","v4","uuidv4","newRecipeStyles","validateName","api","veganBW","veganColor","vegetarianBW","vegetarianColor","glutenFreeBW","glutenFreeColor","validate","input","errors","name","summary","diets","length","image","includes","RecipeCreate","dispatch","user","currentUser","state","auth","recipes","setErrors","success","setSuccess","setInput","score","healthScore","step","stepByStep","vegan","vegetarian","glutenFree","handleChange","e","preventDefault","target","value","handleCheck","checked","filter","diet","handleSubmit","alert","file","setFile","format","setFormat","saveFile","files","formatImage","split","uploadUserFile","code","formData","FormData","append","post","ex","console","error","inputStep","deleted","setDeleted","wasDelete","addStep","current","defaultValue","log","deleteStep","event","stepLength","index","indexOf","splice","container","header","title","username","charAt","toUpperCase","slice","form","inputContainer","map","s","i","select","optionSelect","checkboxContainer","checkbox","id","button","message","Object","keys"],"sources":["C:/Users/Maxim/Desktop/FreshCook-app/client/src/pages/CreateRecipe/RecipeCreate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { postRecipe, getDiets } from \"../../redux/actions/recipes\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport newRecipeStyles from \"./RecipeCreate.module.css\";\r\nimport { validateName } from \"../../helpers/regex\";\r\nimport api from \"../../services/api\";\r\nimport veganBW from \"../../images/VeganBW.png\";\r\nimport veganColor from \"../../images/VeganColor.png\";\r\nimport vegetarianBW from \"../../images/VegetarianBW.png\";\r\nimport vegetarianColor from \"../../images/VegetarianColor.png\";\r\nimport glutenFreeBW from \"../../images/GlutenFreeBW.png\";\r\nimport glutenFreeColor from \"../../images/GlutenFreeColor.png\";\r\n\r\nexport function validate(input) {\r\n  let errors = {};\r\n\r\n  input.name ? (errors.name = \"\") : (errors.name = \"You must name the recipe\");\r\n\r\n  input.summary\r\n    ? (errors.summary = \"\")\r\n    : (errors.summary = \"You must provide a summary\");\r\n\r\n  input.diets.length < 1\r\n    ? (errors.diets = \"Choose at least one diet\")\r\n    : (errors.diets = \"\");\r\n\r\n  if (!input.image.includes(\"https://\") && !input.image.includes(\"http://\")) {\r\n    errors.image = \"This isn't a valid image address\";\r\n  } else {\r\n    errors.image = \"\";\r\n  }\r\n\r\n  // if (input.score < 1 || input.score > 100) {\r\n  //   errors.score = \"Number required. Must be a number between 1-100\";\r\n  // }\r\n  // if (input.healthScore < 1 || input.healthScore > 100) {\r\n  //   errors.healthScore = \"Number required. Must be a number between 1-100\";\r\n  // }\r\n\r\n  return errors;\r\n}\r\n\r\nexport default function RecipeCreate() {\r\n  const dispatch = useDispatch();\r\n\r\n  const { user: currentUser } = useSelector((state) => state.auth);\r\n  const diets = useSelector((state) => state.recipes.diets);\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [success, setSuccess] = useState(false);\r\n  const [input, setInput] = useState({\r\n    name: \"\",\r\n    image: \"\",\r\n    summary: \"\",\r\n    score: \"\",\r\n    healthScore: \"\",\r\n    step: \"\",\r\n    stepByStep: [],\r\n    vegan: \"false\",\r\n    vegetarian: \"false\",\r\n    glutenFree: \"false\",\r\n    diets: [],\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    setInput({\r\n      ...input,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n    setErrors(\r\n      validate({\r\n        ...input,\r\n        [e.target.name]: e.target.value,\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCheck = (e) => {\r\n    if (e.target.checked) {\r\n      setInput({\r\n        ...input,\r\n        diets: [...input.diets, e.target.value],\r\n      });\r\n    } else {\r\n      const diets = input.diets.filter((diet) => {\r\n        return diet !== e.target.value;\r\n      });\r\n      setInput({\r\n        ...input,\r\n        diets: diets,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      input.name &&\r\n      input.image &&\r\n      input.summary &&\r\n      input.score &&\r\n      input.healthScore &&\r\n      input.stepByStep &&\r\n      input.diets\r\n    ) {\r\n      dispatch(postRecipe(input));\r\n      setSuccess(true);\r\n      alert(\"Recipe created correctly\");\r\n      setErrors(\"\");\r\n      setInput({\r\n        name: \"\",\r\n        image: \"\",\r\n        summary: \"\",\r\n        score: \"\",\r\n        healthScore: \"\",\r\n        step: \"\",\r\n        stepByStep: [],\r\n        vegan: \"false\",\r\n        vegetarian: \"false\",\r\n        glutenFree: \"false\",\r\n        diets: [],\r\n      });\r\n    } else {\r\n      // alert(\"DATA REQUIRED\");\r\n      setSuccess(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(getDiets());\r\n  }, [dispatch]);\r\n\r\n  // Cargar imagen de tipo File\r\n  const [file, setFile] = useState();\r\n  const [format, setFormat] = useState(\"\");\r\n\r\n  const saveFile = (e) => {\r\n    setFile(e.target.files[0]);\r\n    var formatImage = e.target.files[0]?.name.split(\".\");\r\n    setFormat(formatImage[formatImage?.length - 1]);\r\n  };\r\n\r\n  const uploadUserFile = async (e) => {\r\n    const code = uuidv4();\r\n    saveFile(e);\r\n    // console.log(code)\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"format\", format);\r\n    try {\r\n      await api.post(`upload/static/${code}.${format}`, formData);\r\n      setInput({\r\n        ...input,\r\n        image: code + \".\" + format,\r\n      });\r\n      alert(\"Imagen cargada con Exito\", \"\", \"success\");\r\n    } catch (ex) {\r\n      console.error(ex);\r\n    }\r\n  };\r\n\r\n  // const [addSteps, setAddSteps] = useState([1]);\r\n\r\n  // let i = 0;\r\n  // const addStep = () => {\r\n  //   i = i + 1;\r\n  //   setAddSteps([...addSteps, i]);\r\n  //   console.log(addSteps);\r\n  // };\r\n\r\n  const inputStep = useRef();\r\n\r\n  const [deleted, setDeleted] = useState({\r\n    wasDelete: false,\r\n  });\r\n\r\n  const addStep = () => {\r\n    setInput({\r\n      ...input,\r\n      stepByStep: [...input.stepByStep, inputStep.current.defaultValue],\r\n    });\r\n    deleted.wasDelete\r\n      ? setDeleted({\r\n          wasDelete: false,\r\n        })\r\n      : console.log(false);\r\n  };\r\n\r\n  const deleteStep = (value) => (event) => {\r\n    let stepLength = input.stepByStep.length;\r\n    let index = input.stepByStep.indexOf(value);\r\n    input.stepByStep.splice(index, 1);\r\n    if (stepLength > input.stepByStep.length) {\r\n      setDeleted({\r\n        wasDelete: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={newRecipeStyles.container}>\r\n      <header className={newRecipeStyles.header}>\r\n        <h1 className={newRecipeStyles.title}>\r\n          <strong>\r\n            {currentUser.username.charAt(0).toUpperCase() +\r\n              currentUser.username.slice(1)}\r\n          </strong>{\" \"}\r\n          make your own recipe!\r\n        </h1>\r\n      </header>\r\n      <form\r\n        onSubmit={(e) => {\r\n          handleSubmit(e);\r\n        }}\r\n        className={newRecipeStyles.form}\r\n      >\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <input\r\n            className={newRecipeStyles.input}\r\n            type=\"text\"\r\n            value={input.name}\r\n            name=\"name\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Name\"\r\n            autoComplete=\"off\"\r\n          />\r\n          {errors.name && <p>{errors.name}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/x-png,image/jpeg\"\r\n            className={newRecipeStyles.input}\r\n            name=\"image\"\r\n            placeholder=\"Image\"\r\n            onChange={(e) => {\r\n              uploadUserFile(e);\r\n            }}\r\n          />{\" \"}\r\n          {/* <button name=\"imagen\" onClick={(e) => uploadUserFile(e)}>\r\n            Upload\r\n          </button> */}\r\n          {errors.image && <p>{errors.image}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <textarea\r\n            className={newRecipeStyles.input}\r\n            type=\"text-area\"\r\n            value={input.summary}\r\n            name=\"summary\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Write a summary\"\r\n            autoComplete=\"off\"\r\n          />\r\n          {errors.summary && <p>{errors.summary}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <label>Score:</label>\r\n          <input\r\n            className={newRecipeStyles.input}\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"100\"\r\n            step=\"1\"\r\n            value={input.score}\r\n            name=\"score\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Score\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <span>{input.score}</span>\r\n          {errors.score && <p>{errors.score}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <label>Health Score:</label>\r\n          <input\r\n            className={newRecipeStyles.input}\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"100\"\r\n            step=\"1\"\r\n            value={input.healthScore}\r\n            name=\"healthScore\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Health score\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <span>{input.healthScore}</span>\r\n          {errors.healthScore && <p>{errors.healthScore}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <h3>Directions:</h3>\r\n          <input\r\n            ref={inputStep}\r\n            className={newRecipeStyles.input}\r\n            type=\"text\"\r\n            value={input.step}\r\n            name=\"step\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Write instruction\"\r\n            autoComplete=\"off\"\r\n          />{\" \"}\r\n          <button onClick={addStep}>Add direction</button>\r\n          <ol>\r\n            {input.stepByStep?.map((s, i) => {\r\n              return (\r\n                <div key={uuidv4()}>\r\n                  <li key={uuidv4()}>{s}</li>\r\n                  <button onClick={deleteStep(s)}>x</button>\r\n                </div>\r\n              );\r\n            })}\r\n          </ol>\r\n          {errors.stepByStep && <p>{errors.stepByStep}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <label>Vegan:</label>\r\n          <button>\r\n            {input.vegan ? (\r\n              <img src={veganBW} alt=\"vegan\" />\r\n            ) : (\r\n              <img src={veganColor} alt=\"vegan\" />\r\n            )}\r\n          </button>\r\n          <select\r\n            name=\"vegan\"\r\n            rows=\"5\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            className={newRecipeStyles.select}\r\n          >\r\n            <option value={false} className={newRecipeStyles.optionSelect}>\r\n              False\r\n            </option>\r\n            <option value={true} className={newRecipeStyles.optionSelect}>\r\n              True\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <label>Vegetarian:</label>\r\n          <select\r\n            name=\"vegetarian\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            className={newRecipeStyles.select}\r\n          >\r\n            <option value={false} className={newRecipeStyles.optionSelect}>\r\n              False\r\n            </option>\r\n            <option value={true} className={newRecipeStyles.optionSelect}>\r\n              True\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <label>Gluten Free:</label>\r\n          <select\r\n            name=\"glutenFree\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            className={newRecipeStyles.select}\r\n          >\r\n            <option value={false} className={newRecipeStyles.optionSelect}>\r\n              False\r\n            </option>\r\n            <option value={true} className={newRecipeStyles.optionSelect}>\r\n              True\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <label>Diets</label>\r\n        <div className={newRecipeStyles.checkboxContainer}>\r\n          {diets?.map((diet) => (\r\n            <label key={diet.id + \"label\"}>\r\n              <input\r\n                className={newRecipeStyles.checkbox}\r\n                type=\"checkbox\"\r\n                name={diet.name}\r\n                value={diet.name}\r\n                key={diet.id + \"diet\"}\r\n                onChange={(e) => {\r\n                  handleCheck(e);\r\n                }}\r\n              />\r\n              {diet.name.charAt(0).toUpperCase() + diet.name.slice(1)}\r\n            </label>\r\n          ))}\r\n        </div>\r\n        <button className={newRecipeStyles.button} type=\"submit\">\r\n          Create Recipe\r\n        </button>\r\n        <Link to=\"/home\">\r\n          <button className={newRecipeStyles.button}>Back To Home</button>\r\n        </Link>\r\n      </form>\r\n      {success ? (\r\n        <h2 className={newRecipeStyles.message}>Created Successfully</h2>\r\n      ) : null}\r\n      {Object.keys(errors).length > 0 ? (\r\n        <h2 className={newRecipeStyles.message}>Something went wrong!</h2>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}