{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maxim\\\\Desktop\\\\FreshCook-app\\\\client\\\\src\\\\pages\\\\CreateRecipe\\\\RecipeCreate.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link, Navigate, useLocation, useNavigate } from \"react-router-dom\";\nimport { postRecipe, getDiets } from \"../../redux/actions/recipes\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport newRecipeStyles from \"./RecipeCreate.module.css\";\nimport { validateName } from \"../../helpers/regex\";\nimport api from \"../../services/api\";\nimport veganBW from \"../../images/VeganBW.png\";\nimport veganColor from \"../../images/VeganColor.png\";\nimport vegetarianBW from \"../../images/VegetarianBW.png\";\nimport vegetarianColor from \"../../images/VegetarianColor.png\";\nimport glutenFreeBW from \"../../images/GlutenFreeBW.png\";\nimport glutenFreeColor from \"../../images/GlutenFreeColor.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function validate(input) {\n  let errors = {}; // input.name ? (errors.name = \"\") : (errors.name = \"You must name the recipe\");\n  // input.summary\n  //   ? (errors.summary = \"\")\n  //   : (errors.summary = \"You must provide a summary\");\n  // input.diets.length < 1\n  //   ? (errors.diets = \"Choose at least one diet\")\n  //   : (errors.diets = \"\");\n  // if (!input.image.includes(\"https://\") && !input.image.includes(\"http://\")) {\n  //   errors.image = \"This isn't a valid image address\";\n  // } else {\n  //   errors.image = \"\";\n  // }\n  // if (input.score < 1 || input.score > 100) {\n  //   errors.score = \"Number required. Must be a number between 1-100\";\n  // }\n  // if (input.healthScore < 1 || input.healthScore > 100) {\n  //   errors.healthScore = \"Number required. Must be a number between 1-100\";\n  // }\n\n  return errors;\n}\nexport default function RecipeCreate() {\n  _s();\n\n  var _input$stepByStep;\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    user: currentUser\n  } = useSelector(state => state.auth);\n  const diets = useSelector(state => state.recipes.diets);\n  const [errors, setErrors] = useState({});\n  const [success, setSuccess] = useState(false);\n  const [input, setInput] = useState({\n    name: \"\",\n    image: \"\",\n    summary: \"\",\n    healthScore: 0,\n    step: \"\",\n    stepByStep: [],\n    vegan: false,\n    vegetarian: false,\n    glutenFree: false,\n    diets: []\n  });\n\n  const handleChange = e => {\n    e.preventDefault();\n    setInput({ ...input,\n      [e.target.name]: e.target.value\n    });\n    setErrors(validate({ ...input,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleCheck = e => {\n    if (e.target.checked) {\n      setInput({ ...input,\n        diets: [...input.diets, e.target.value]\n      });\n    } else {\n      const diets = input.diets.filter(diet => {\n        return diet !== e.target.value;\n      });\n      setInput({ ...input,\n        diets: diets\n      });\n    }\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (input.name && input.image && input.summary && input.healthScore && input.stepByStep && input.diets) {\n      dispatch(postRecipe(input));\n      setSuccess(true); // alert(\"Recipe created correctly\");\n\n      setErrors(\"\");\n      setInput({\n        name: \"\",\n        image: \"\",\n        summary: \"\",\n        healthScore: 0,\n        step: \"\",\n        stepByStep: [],\n        vegan: false,\n        vegetarian: false,\n        glutenFree: false,\n        diets: []\n      });\n      navigate(\"/Home\");\n    } else {\n      // alert(\"DATA REQUIRED\");\n      setSuccess(false);\n    }\n  };\n\n  useEffect(() => {\n    dispatch(getDiets());\n  }, [dispatch]); // Cargar imagen de tipo File\n\n  const [file, setFile] = useState(null);\n  const [format, setFormat] = useState(\"\");\n  const [uploadSuccess, setUploadSuccess] = useState(\"no image selected\");\n\n  const saveFile = async e => {\n    var _e$target$files$, _e$target$files$2;\n\n    setFile(e.target.files[0]);\n    setUploadSuccess((_e$target$files$ = e.target.files[0]) === null || _e$target$files$ === void 0 ? void 0 : _e$target$files$.name);\n    var formatImage = (_e$target$files$2 = e.target.files[0]) === null || _e$target$files$2 === void 0 ? void 0 : _e$target$files$2.name.split(\".\");\n    setFormat(formatImage[(formatImage === null || formatImage === void 0 ? void 0 : formatImage.length) - 1]);\n    await uploadUserFile(e);\n  };\n\n  const uploadUserFile = async e => {\n    const code = uuidv4();\n    console.log(file);\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"format\", format);\n\n    try {\n      await api.post(`upload/static/${code}.${format}`, formData);\n      setInput({ ...input,\n        image: code + \".\" + format\n      }); // alert(\"Imagen cargada con Exito\", \"\", \"success\");\n    } catch (ex) {\n      console.error(ex);\n    }\n  }; // const [addSteps, setAddSteps] = useState([1]);\n  // let i = 0;\n  // const addStep = () => {\n  //   i = i + 1;\n  //   setAddSteps([...addSteps, i]);\n  //   console.log(addSteps);\n  // };\n\n\n  const inputStep = useRef();\n  const [deleted, setDeleted] = useState({\n    wasDelete: false\n  });\n\n  const addStep = () => {\n    setInput({ ...input,\n      stepByStep: [...input.stepByStep, inputStep.current.defaultValue],\n      step: \"\"\n    });\n    deleted.wasDelete ? setDeleted({\n      wasDelete: false\n    }) : console.log(false);\n  };\n\n  const deleteStep = value => event => {\n    let stepLength = input.stepByStep.length;\n    let index = input.stepByStep.indexOf(value);\n    input.stepByStep.splice(index, 1);\n\n    if (stepLength > input.stepByStep.length) {\n      setDeleted({\n        wasDelete: true\n      });\n    }\n  };\n\n  const handleVegan = () => {\n    input.vegan ? setInput({ ...input,\n      vegan: false\n    }) : setInput({ ...input,\n      vegan: true\n    });\n  };\n\n  const handleVegetarian = () => {\n    input.vegetarian ? setInput({ ...input,\n      vegetarian: false\n    }) : setInput({ ...input,\n      vegetarian: true\n    });\n  };\n\n  const handleGlutenFree = () => {\n    input.glutenFree ? setInput({ ...input,\n      glutenFree: false\n    }) : setInput({ ...input,\n      glutenFree: true\n    });\n  };\n\n  const fileInput = useRef(null);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: newRecipeStyles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: newRecipeStyles.header,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: newRecipeStyles.title,\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: currentUser.username.charAt(0).toUpperCase() + currentUser.username.slice(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), \" \", \"make your own recipe!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: newRecipeStyles.hr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        handleSubmit(e);\n      },\n      className: newRecipeStyles.form,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: newRecipeStyles.input,\n          type: \"text\",\n          value: input.name,\n          name: \"name\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Name\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputFileContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"inputTag\",\n          type: \"file\",\n          accept: \"image/x-png,image/jpeg\",\n          className: newRecipeStyles.inputFile,\n          name: \"image\",\n          multiple: false,\n          ref: fileInput,\n          placeholder: \"Image\",\n          onChange: e => {\n            saveFile(e);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: newRecipeStyles.fileButton,\n          onClick: () => fileInput.current.click(),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-2x fa-camera\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 52\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), uploadSuccess === \"no image selected\" ? \"Select image\" : null, \" \", uploadSuccess === \"no image selected\" ? null : uploadSuccess, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this), errors.image && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputTextAreaContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: newRecipeStyles.inputTextArea,\n          type: \"text-area\",\n          value: input.summary,\n          name: \"summary\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Write a summary\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), errors.summary && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Health Score:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: newRecipeStyles.input,\n          type: \"range\",\n          min: \"0\",\n          max: \"100\",\n          step: \"1\",\n          value: input.healthScore,\n          name: \"healthScore\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Health score\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: newRecipeStyles.scoreSpan,\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: newRecipeStyles.labelDiet,\n            children: input.healthScore\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), errors.healthScore && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.healthScore\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 34\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: newRecipeStyles.labelDiet,\n          children: \"Directions:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: inputStep,\n          className: newRecipeStyles.input,\n          type: \"text\",\n          value: input.step,\n          name: \"step\",\n          onChange: e => {\n            handleChange(e);\n          },\n          placeholder: \"Write instruction\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: newRecipeStyles.stepButton,\n          onClick: addStep,\n          children: \"Add direction\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: newRecipeStyles.stepList,\n          children: (_input$stepByStep = input.stepByStep) === null || _input$stepByStep === void 0 ? void 0 : _input$stepByStep.map((s, i) => {\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"br\", {}, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: newRecipeStyles.stepItemContainer,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: newRecipeStyles.buttonItem,\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    className: newRecipeStyles.stepItem,\n                    children: s\n                  }, uuidv4(), false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 367,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: newRecipeStyles.buttonDelete,\n                    onClick: deleteStep(s),\n                    children: \"x\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 370,\n                    columnNumber: 23\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this)\n              }, uuidv4(), false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), errors.stepByStep && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: errors.stepByStep\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: newRecipeStyles.labelDiet,\n        children: \"Recipe is:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.inputContainerDiet,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: newRecipeStyles.buttonDiet,\n          onClick: handleVegan,\n          children: input.vegan ? /*#__PURE__*/_jsxDEV(\"img\", {\n            className: newRecipeStyles.imgDiet,\n            src: veganColor,\n            alt: \"vegan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            className: newRecipeStyles.imgDiet,\n            src: veganBW,\n            alt: \"vegan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: newRecipeStyles.buttonDiet,\n          onClick: handleVegetarian,\n          children: input.vegetarian ? /*#__PURE__*/_jsxDEV(\"img\", {\n            className: newRecipeStyles.imgDiet,\n            src: vegetarianColor,\n            alt: \"vegetarian\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            className: newRecipeStyles.imgDiet,\n            src: vegetarianBW,\n            alt: \"vegetarian\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: newRecipeStyles.buttonDiet,\n          onClick: handleGlutenFree,\n          children: input.glutenFree ? /*#__PURE__*/_jsxDEV(\"img\", {\n            className: newRecipeStyles.imgDiet,\n            src: glutenFreeColor,\n            alt: \"glutenFree\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n            className: newRecipeStyles.imgDiet,\n            src: glutenFreeBW,\n            alt: \"glutenFree\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: newRecipeStyles.labelDiet,\n        children: \"Diets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: newRecipeStyles.checkboxContainer,\n        children: diets === null || diets === void 0 ? void 0 : diets.map(diet => /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: newRecipeStyles.checkbox,\n            type: \"checkbox\",\n            name: diet.name,\n            value: diet.name,\n            onChange: e => {\n              handleCheck(e);\n            }\n          }, diet.id + \"diet\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this), diet.name.charAt(0).toUpperCase() + diet.name.slice(1)]\n        }, diet.id + \"label\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: newRecipeStyles.button,\n        type: \"submit\",\n        children: \"Create Recipe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/home\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: newRecipeStyles.button,\n          children: \"Back To Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), success ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: newRecipeStyles.message,\n      children: \"Created Successfully\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 9\n    }, this) : null, Object.keys(errors).length > 0 ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: newRecipeStyles.message,\n      children: \"Something went wrong!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 474,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RecipeCreate, \"7PQYM7isKqQBuPSfzauvTNTgbV4=\", false, function () {\n  return [useNavigate, useDispatch, useSelector, useSelector];\n});\n\n_c = RecipeCreate;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecipeCreate\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatch","useSelector","Link","Navigate","useLocation","useNavigate","postRecipe","getDiets","v4","uuidv4","newRecipeStyles","validateName","api","veganBW","veganColor","vegetarianBW","vegetarianColor","glutenFreeBW","glutenFreeColor","validate","input","errors","RecipeCreate","navigate","dispatch","user","currentUser","state","auth","diets","recipes","setErrors","success","setSuccess","setInput","name","image","summary","healthScore","step","stepByStep","vegan","vegetarian","glutenFree","handleChange","e","preventDefault","target","value","handleCheck","checked","filter","diet","handleSubmit","file","setFile","format","setFormat","uploadSuccess","setUploadSuccess","saveFile","files","formatImage","split","length","uploadUserFile","code","console","log","formData","FormData","append","post","ex","error","inputStep","deleted","setDeleted","wasDelete","addStep","current","defaultValue","deleteStep","event","stepLength","index","indexOf","splice","handleVegan","handleVegetarian","handleGlutenFree","fileInput","container","header","title","username","charAt","toUpperCase","slice","hr","form","inputContainer","inputFileContainer","inputFile","fileButton","click","inputTextAreaContainer","inputTextArea","scoreSpan","labelDiet","stepButton","stepList","map","s","i","stepItemContainer","buttonItem","stepItem","buttonDelete","inputContainerDiet","buttonDiet","imgDiet","checkboxContainer","checkbox","id","button","message","Object","keys"],"sources":["C:/Users/Maxim/Desktop/FreshCook-app/client/src/pages/CreateRecipe/RecipeCreate.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, Navigate, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { postRecipe, getDiets } from \"../../redux/actions/recipes\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport newRecipeStyles from \"./RecipeCreate.module.css\";\r\nimport { validateName } from \"../../helpers/regex\";\r\nimport api from \"../../services/api\";\r\nimport veganBW from \"../../images/VeganBW.png\";\r\nimport veganColor from \"../../images/VeganColor.png\";\r\nimport vegetarianBW from \"../../images/VegetarianBW.png\";\r\nimport vegetarianColor from \"../../images/VegetarianColor.png\";\r\nimport glutenFreeBW from \"../../images/GlutenFreeBW.png\";\r\nimport glutenFreeColor from \"../../images/GlutenFreeColor.png\";\r\n\r\nexport function validate(input) {\r\n  let errors = {};\r\n\r\n  // input.name ? (errors.name = \"\") : (errors.name = \"You must name the recipe\");\r\n\r\n  // input.summary\r\n  //   ? (errors.summary = \"\")\r\n  //   : (errors.summary = \"You must provide a summary\");\r\n\r\n  // input.diets.length < 1\r\n  //   ? (errors.diets = \"Choose at least one diet\")\r\n  //   : (errors.diets = \"\");\r\n\r\n  // if (!input.image.includes(\"https://\") && !input.image.includes(\"http://\")) {\r\n  //   errors.image = \"This isn't a valid image address\";\r\n  // } else {\r\n  //   errors.image = \"\";\r\n  // }\r\n\r\n  // if (input.score < 1 || input.score > 100) {\r\n  //   errors.score = \"Number required. Must be a number between 1-100\";\r\n  // }\r\n  // if (input.healthScore < 1 || input.healthScore > 100) {\r\n  //   errors.healthScore = \"Number required. Must be a number between 1-100\";\r\n  // }\r\n\r\n  return errors;\r\n}\r\n\r\nexport default function RecipeCreate() {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const { user: currentUser } = useSelector((state) => state.auth);\r\n  const diets = useSelector((state) => state.recipes.diets);\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [success, setSuccess] = useState(false);\r\n  const [input, setInput] = useState({\r\n    name: \"\",\r\n    image: \"\",\r\n    summary: \"\",\r\n    healthScore: 0,\r\n    step: \"\",\r\n    stepByStep: [],\r\n    vegan: false,\r\n    vegetarian: false,\r\n    glutenFree: false,\r\n    diets: [],\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    setInput({\r\n      ...input,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n    setErrors(\r\n      validate({\r\n        ...input,\r\n        [e.target.name]: e.target.value,\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleCheck = (e) => {\r\n    if (e.target.checked) {\r\n      setInput({\r\n        ...input,\r\n        diets: [...input.diets, e.target.value],\r\n      });\r\n    } else {\r\n      const diets = input.diets.filter((diet) => {\r\n        return diet !== e.target.value;\r\n      });\r\n      setInput({\r\n        ...input,\r\n        diets: diets,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      input.name &&\r\n      input.image &&\r\n      input.summary &&\r\n      input.healthScore &&\r\n      input.stepByStep &&\r\n      input.diets\r\n    ) {\r\n      dispatch(postRecipe(input));\r\n      setSuccess(true);\r\n      // alert(\"Recipe created correctly\");\r\n      setErrors(\"\");\r\n      setInput({\r\n        name: \"\",\r\n        image: \"\",\r\n        summary: \"\",\r\n        healthScore: 0,\r\n        step: \"\",\r\n        stepByStep: [],\r\n        vegan: false,\r\n        vegetarian: false,\r\n        glutenFree: false,\r\n        diets: [],\r\n      });\r\n      navigate(\"/Home\");\r\n    } else {\r\n      // alert(\"DATA REQUIRED\");\r\n      setSuccess(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(getDiets());\r\n  }, [dispatch]);\r\n\r\n  // Cargar imagen de tipo File\r\n  const [file, setFile] = useState(null);\r\n  const [format, setFormat] = useState(\"\");\r\n  const [uploadSuccess, setUploadSuccess] = useState(\"no image selected\");\r\n\r\n  const saveFile = async (e) => {\r\n    setFile(e.target.files[0]);\r\n    setUploadSuccess(e.target.files[0]?.name);\r\n    var formatImage = e.target.files[0]?.name.split(\".\");\r\n    setFormat(formatImage[formatImage?.length - 1]);\r\n    await uploadUserFile(e);\r\n  };\r\n\r\n  const uploadUserFile = async (e) => {\r\n    const code = uuidv4();\r\n    console.log(file);\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append(\"format\", format);\r\n    try {\r\n      await api.post(`upload/static/${code}.${format}`, formData);\r\n      setInput({\r\n        ...input,\r\n        image: code + \".\" + format,\r\n      });\r\n      // alert(\"Imagen cargada con Exito\", \"\", \"success\");\r\n    } catch (ex) {\r\n      console.error(ex);\r\n    }\r\n  };\r\n\r\n  // const [addSteps, setAddSteps] = useState([1]);\r\n\r\n  // let i = 0;\r\n  // const addStep = () => {\r\n  //   i = i + 1;\r\n  //   setAddSteps([...addSteps, i]);\r\n  //   console.log(addSteps);\r\n  // };\r\n\r\n  const inputStep = useRef();\r\n\r\n  const [deleted, setDeleted] = useState({\r\n    wasDelete: false,\r\n  });\r\n\r\n  const addStep = () => {\r\n    setInput({\r\n      ...input,\r\n      stepByStep: [...input.stepByStep, inputStep.current.defaultValue],\r\n      step: \"\",\r\n    });\r\n    deleted.wasDelete\r\n      ? setDeleted({\r\n          wasDelete: false,\r\n        })\r\n      : console.log(false);\r\n  };\r\n\r\n  const deleteStep = (value) => (event) => {\r\n    let stepLength = input.stepByStep.length;\r\n    let index = input.stepByStep.indexOf(value);\r\n    input.stepByStep.splice(index, 1);\r\n    if (stepLength > input.stepByStep.length) {\r\n      setDeleted({\r\n        wasDelete: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleVegan = () => {\r\n    input.vegan\r\n      ? setInput({\r\n          ...input,\r\n          vegan: false,\r\n        })\r\n      : setInput({\r\n          ...input,\r\n          vegan: true,\r\n        });\r\n  };\r\n  const handleVegetarian = () => {\r\n    input.vegetarian\r\n      ? setInput({\r\n          ...input,\r\n          vegetarian: false,\r\n        })\r\n      : setInput({\r\n          ...input,\r\n          vegetarian: true,\r\n        });\r\n  };\r\n  const handleGlutenFree = () => {\r\n    input.glutenFree\r\n      ? setInput({\r\n          ...input,\r\n          glutenFree: false,\r\n        })\r\n      : setInput({\r\n          ...input,\r\n          glutenFree: true,\r\n        });\r\n  };\r\n\r\n  const fileInput = useRef(null);\r\n\r\n  return (\r\n    <div className={newRecipeStyles.container}>\r\n      <header className={newRecipeStyles.header}>\r\n        <h1 className={newRecipeStyles.title}>\r\n          <strong>\r\n            {currentUser.username.charAt(0).toUpperCase() +\r\n              currentUser.username.slice(1)}\r\n          </strong>{\" \"}\r\n          make your own recipe!\r\n        </h1>\r\n      </header>\r\n      <hr className={newRecipeStyles.hr}></hr>\r\n      <form\r\n        onSubmit={(e) => {\r\n          handleSubmit(e);\r\n        }}\r\n        className={newRecipeStyles.form}\r\n      >\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <input\r\n            className={newRecipeStyles.input}\r\n            type=\"text\"\r\n            value={input.name}\r\n            name=\"name\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Name\"\r\n            autoComplete=\"off\"\r\n          />\r\n          {errors.name && <p>{errors.name}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputFileContainer}>\r\n          <input\r\n            id=\"inputTag\"\r\n            type=\"file\"\r\n            accept=\"image/x-png,image/jpeg\"\r\n            className={newRecipeStyles.inputFile}\r\n            name=\"image\"\r\n            multiple={false}\r\n            ref={fileInput}\r\n            placeholder=\"Image\"\r\n            onChange={(e) => {\r\n              saveFile(e);\r\n            }}\r\n          />{\" \"}\r\n          <button\r\n            type=\"button\"\r\n            className={newRecipeStyles.fileButton}\r\n            onClick={() => fileInput.current.click()}\r\n          >\r\n            <i className=\"fa fa-2x fa-camera\"></i> <br />\r\n            <br />\r\n            {uploadSuccess === \"no image selected\" ? \"Select image\" : null}{\" \"}\r\n            {uploadSuccess === \"no image selected\" ? null : uploadSuccess}{\" \"}\r\n          </button>\r\n          {errors.image && <p>{errors.image}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputTextAreaContainer}>\r\n          <textarea\r\n            className={newRecipeStyles.inputTextArea}\r\n            type=\"text-area\"\r\n            value={input.summary}\r\n            name=\"summary\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Write a summary\"\r\n            autoComplete=\"off\"\r\n          />\r\n          {errors.summary && <p>{errors.summary}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <label>Health Score:</label>\r\n          <input\r\n            className={newRecipeStyles.input}\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"100\"\r\n            step=\"1\"\r\n            value={input.healthScore}\r\n            name=\"healthScore\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Health score\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <div className={newRecipeStyles.scoreSpan}>\r\n            <span className={newRecipeStyles.labelDiet}>\r\n              {input.healthScore}\r\n            </span>\r\n          </div>\r\n          {errors.healthScore && <p>{errors.healthScore}</p>}\r\n        </div>\r\n        <div className={newRecipeStyles.inputContainer}>\r\n          <h3 className={newRecipeStyles.labelDiet}>Directions:</h3>\r\n          <input\r\n            ref={inputStep}\r\n            className={newRecipeStyles.input}\r\n            type=\"text\"\r\n            value={input.step}\r\n            name=\"step\"\r\n            onChange={(e) => {\r\n              handleChange(e);\r\n            }}\r\n            placeholder=\"Write instruction\"\r\n            autoComplete=\"off\"\r\n          />{\" \"}\r\n          <button\r\n            type=\"button\"\r\n            className={newRecipeStyles.stepButton}\r\n            onClick={addStep}\r\n          >\r\n            Add direction\r\n          </button>\r\n          <ol className={newRecipeStyles.stepList}>\r\n            {input.stepByStep?.map((s, i) => {\r\n              return (\r\n                <>\r\n                  <br key={uuidv4()} />\r\n                  <div\r\n                    className={newRecipeStyles.stepItemContainer}\r\n                    key={uuidv4()}\r\n                  >\r\n                    <div className={newRecipeStyles.buttonItem}>\r\n                      <li className={newRecipeStyles.stepItem} key={uuidv4()}>\r\n                        {s}\r\n                      </li>\r\n                      <button\r\n                        type=\"button\"\r\n                        className={newRecipeStyles.buttonDelete}\r\n                        onClick={deleteStep(s)}\r\n                      >\r\n                        x\r\n                      </button>{\" \"}\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              );\r\n            })}\r\n          </ol>\r\n          {errors.stepByStep && <p>{errors.stepByStep}</p>}\r\n        </div>\r\n        <label className={newRecipeStyles.labelDiet}>Recipe is:</label>\r\n        <div className={newRecipeStyles.inputContainerDiet}>\r\n          <button\r\n            type=\"button\"\r\n            className={newRecipeStyles.buttonDiet}\r\n            onClick={handleVegan}\r\n          >\r\n            {input.vegan ? (\r\n              <img\r\n                className={newRecipeStyles.imgDiet}\r\n                src={veganColor}\r\n                alt=\"vegan\"\r\n              />\r\n            ) : (\r\n              <img\r\n                className={newRecipeStyles.imgDiet}\r\n                src={veganBW}\r\n                alt=\"vegan\"\r\n              />\r\n            )}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className={newRecipeStyles.buttonDiet}\r\n            onClick={handleVegetarian}\r\n          >\r\n            {input.vegetarian ? (\r\n              <img\r\n                className={newRecipeStyles.imgDiet}\r\n                src={vegetarianColor}\r\n                alt=\"vegetarian\"\r\n              />\r\n            ) : (\r\n              <img\r\n                className={newRecipeStyles.imgDiet}\r\n                src={vegetarianBW}\r\n                alt=\"vegetarian\"\r\n              />\r\n            )}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className={newRecipeStyles.buttonDiet}\r\n            onClick={handleGlutenFree}\r\n          >\r\n            {input.glutenFree ? (\r\n              <img\r\n                className={newRecipeStyles.imgDiet}\r\n                src={glutenFreeColor}\r\n                alt=\"glutenFree\"\r\n              />\r\n            ) : (\r\n              <img\r\n                className={newRecipeStyles.imgDiet}\r\n                src={glutenFreeBW}\r\n                alt=\"glutenFree\"\r\n              />\r\n            )}\r\n          </button>\r\n        </div>\r\n        <label className={newRecipeStyles.labelDiet}>Diets</label>\r\n        <div className={newRecipeStyles.checkboxContainer}>\r\n          {diets?.map((diet) => (\r\n            <label key={diet.id + \"label\"}>\r\n              <input\r\n                className={newRecipeStyles.checkbox}\r\n                type=\"checkbox\"\r\n                name={diet.name}\r\n                value={diet.name}\r\n                key={diet.id + \"diet\"}\r\n                onChange={(e) => {\r\n                  handleCheck(e);\r\n                }}\r\n              />\r\n              {diet.name.charAt(0).toUpperCase() + diet.name.slice(1)}\r\n            </label>\r\n          ))}\r\n        </div>\r\n        <button className={newRecipeStyles.button} type=\"submit\">\r\n          Create Recipe\r\n        </button>\r\n        <Link to=\"/home\">\r\n          <button className={newRecipeStyles.button}>Back To Home</button>\r\n        </Link>\r\n      </form>\r\n      {success ? (\r\n        <h2 className={newRecipeStyles.message}>Created Successfully</h2>\r\n      ) : null}\r\n      {Object.keys(errors).length > 0 ? (\r\n        <h2 className={newRecipeStyles.message}>Something went wrong!</h2>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}